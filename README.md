# Tools
unified-cddl-generator.cddl - Concatenates single definition cddl files into one large monolithic cddl file named auto-gen.cddl. The top-level CDDL definition needs to be named "root.cddl" to be located by script. Takes a Directory path that stores all cddl files as an argument.

diag_generator.py - Takes json file to be converted to diag as an argument and returns a file named diag_auto_gen.diag of the converted json file. 

# BMC_PCH Directory
Contains cddl mappings for BMC and PCH Manifests and the JSON manifest.


# AFM Directory
Contains cddl mappings for AFM Manifest and the JSON manifest.

# CoDice Directory
* clean.sh - Script for cleaning up output files generated by the DICE entities.
* CoDice_layers.c - DICE functions file
* CoDice_layers.h - Header file for CoDice_layers.c

## CoDice/Attester Directory
* AFM_Evidence - Directory to store AFM evidence used by the attester.
* BMC_PCH_Evidence - Directory to store BMC/PCH evidence used by the attester.
* Evidence - Ouput Directory for evidence generated by the Attester.
* Attester_Client.py - Client program to send attester evidence to verifier over a TCP connection. Accepts evidence file paths as command line arguments.
* CoDice_test_attester.c - Attester implementation. Accepts diag evidence file paths as command line arguments.
* run_attester.sh - Shell script for running the attester program. Only generates the evidence, DOES NOT send it.

## CoDice/Endorser Directory
* AFM_Manifest - Directory to store output files generated by endorser set up script.
* BMC_PCH_Manifest - Directory to store output files generated by endorser set up script.
* Combined_Manifests - Directory to store the combined manifests generated by the endorser set up script
* Endorsements - Output directory used to store endorsement files generated by the Endorser.
* CoDice_test_endorser.c - Endorser implementation. Accepts a manifest file path as an argument. Should be the combined manifest diag file.
* Endorser_Client.py - Client program to send endorser endorsements to verifier over a TCP connection. Takes the endorsement file paths to be sent as command line arguments.
* endorser_setup.sh: 
    * Generates cddl files. 
    * Generates diag files for seperate json manifests. 
    * Validates seperate diag files with their corresponding cddl files. 
    * Combines all diag manifests into one manifest to be used by the Endorser. 
* run_endorser.sh: Shell script for running the endorser program. Only generates endorsements, DOES NOT send it.


## CoDice/Verifier Directory
* Endorsements - Cleanup directory
* Evidence - Cleanup directory
* CoDice_test_verifier.c - Verifier implementation
* run_verifier.sh - Shell script for running the verifier program. Should be run after the endorser and attester have generated and sent their files.
* Verifier_Server.py - Server program to receive endorsements and evidence from the attester and endorser. Expects six files total. 2 certificate files, 2 public key files, a manifest file, and an measurement evidence file.

# Run Steps
1. Run Endorser set up script: endorser_setup.sh
2. Run Endorser test script: run_endorser.sh
3. Run Attester test script: run_attester.sh
4. Start Verifier server: Verifier_Server.py
5. Run Endorser Client with the following arguments: Endorser_Client.py Endorsements/Endorser_Certificate.pem Endorsements/Endorser_Manifest.diag Endorsements/Endorser_Public_Key.pem
6. Run Attester Client with the following arguments: Attester_Client.py Evidence/Attester_Cert.pem Evidence/Attester_Measurement.txt Evidence/Attester_Public_Key.pem
7. Run Verifier test script: run_verifier.sh